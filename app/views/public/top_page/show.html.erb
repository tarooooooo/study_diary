<div class="bg-light p-4 p-sm-5 my-4 rounded">
  <h1>StudyDiary</h1>
  <p>目標を立てて学びを積み上げよう！</p>
  <p>
    <% if user_signed_in? %>
      <%= link_to '学習日記をつける', new_public_learning_diary_path, class: "btn btn-primary btn-lg" %>
    <% else %>
      <%= link_to '新規登録', new_user_registration_path, class: "btn btn-primary btn-lg" %>
      <%= link_to 'ログイン', new_user_session_path,  class: 'btn btn-secondary btn-lg' %>
    <% end %>
  </p>
</div>
<div class="container">
  <div class="row justify-content-center mb-5">
    <div class="col-12 col-md-5 mb-5">
      <%= pie_chart @study_categories_count,
                    donut: true,  # ドーナツグラフにするための記述
                    suffix: "分",
                    colors: ["#ACFF40", "#FFF33F", "#3fbeff", "#3f4bff", "#a63fff", "#ffd278"], # 色を指定
                    label: "学習時間",  # ホバーした時に表示される詳細の項目名を指定
                    title: "カテゴリ別の学習比率（今週）"
      %>
    </div>
    <div class="col-12 col-md-5">
      <div class="avg-weekly-study-data">
        <p>1日の学習平均 (今週)</p>
        <p>
          <%= @study_time_hh %>時間<%= @study_time_mm %>分
        </p>
      </div>
      <%= column_chart  @learning_diaries_chart_data,
                        stacked: true, # 積み上げ式にするための記述
                        max_width: '100vw', # 幅を指定
                        colors: ['#cbd0d3', "#ACFF40", "#FFF33F", "#3fbeff", "#3f4bff", "#a63fff", "#ffd278"], # 色を指定
                        suffix: "分" # 単位を指定
      %>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-8">
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow=<%= 80 %> aria-valuemin="0" aria-valuemax="100" style=<%= "width:" + "80" + "%;" %>> <%= 80 %>% </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-8">
      <%= form_with model: @study_plan, url: public_study_plans_path, method: :post, local: true do |f| %>
        <div class="form_box bg-white p-4">
          <div class="form-group">
            <p>1日の学習目標時間を設定しよう！</p>
            <%= f.select :weekly_target_time, options_for_select(@study_time_array), {}, {class: 'form-control'} %>
          </div>
          <div class="form-group">
            <p>今週学習することを記述してください！</p>
            <%= f.text_field :title, class: "form-control" %>
          </div>
          <p class="mt-2">
            <%= f.submit '保存', class: 'btn btn-primary' %>
          </p>
        </div>
      <% end %>
    </div>
  </div>
</div>
